salloc -A bsc98 -t 01:00:00 -n 1 -c 20 --gres gpu:1 -q acc_interactive --partition accinteractive srun --pty /bin/bash

module load singularity

nohup singularity exec --nv --env PYTHONPATH=/usr/local/lib/python3.10/dist-packages --env TOKENIZERS_PARALLELISM=false --bind /gpfs/home/bsc/bsc098069/llm_benchmarking/FairnessInLLMAdapterServing/vllm/core:/usr/local/lib/python3.10/dist-packages/vllm/core --bind /gpfs/home/bsc/bsc098069/llm_benchmarking/FairnessInLLMAdapterServing/vllm/engine:/usr/local/lib/python3.10/dist-packages/vllm/engine --bind /gpfs/home/bsc/bsc098069/llm_benchmarking/FairnessInLLMAdapterServing/vllm/entrypoints:/usr/local/lib/python3.10/dist-packages/vllm/entrypoints --bind /gpfs/home/bsc/bsc098069/llm_benchmarking/FairnessInLLMAdapterServing/vllm/executor:/usr/local/lib/python3.10/dist-packages/vllm/executor --bind /gpfs/home/bsc/bsc098069/llm_benchmarking/FairnessInLLMAdapterServing/vllm/lora:/usr/local/lib/python3.10/dist-packages/vllm/lora --bind /gpfs/home/bsc/bsc098069/llm_benchmarking/FairnessInLLMAdapterServing/vllm/model_executor:/usr/local/lib/python3.10/dist-packages/vllm/model_executor --bind /gpfs/home/bsc/bsc098069/llm_benchmarking/FairnessInLLMAdapterServing/vllm/worker:/usr/local/lib/python3.10/dist-packages/vllm/worker --bind /gpfs/home/bsc/bsc098069/llm_benchmarking/FairnessInLLMAdapterServing/vllm/config.py:/usr/local/lib/python3.10/dist-packages/vllm/config.py --bind /gpfs/home/bsc/bsc098069/llm_benchmarking/FairnessInLLMAdapterServing/vllm/sequence.py:/usr/local/lib/python3.10/dist-packages/vllm/sequence.py --bind /gpfs/home/bsc/bsc098069/llm_benchmarking/FairnessInLLMAdapterServing/vllm/outputs.py:/usr/local/lib/python3.10/dist-packages/vllm/outputs.py /gpfs/scratch/bsc98/bsc098069/llm_benchmarking/images/vllm-benchmark.sif python3 /usr/local/lib/python3.10/dist-packages/vllm/entrypoints/openai/api_server.py --port=46465 --disable-log-requests  --model=/gpfs/scratch/bsc98/bsc098069/llm_benchmarking/models/llama/llama-2-7b --enable-lora --lora-modules dummy_lora_rank_8=/gpfs/scratch/bsc98/bsc098069/llm_benchmarking/models/llama/llama-2-7b/lora/yard1_sql-lora-test_dummy_rank_8/ dummy_lora_rank_16=/gpfs/scratch/bsc98/bsc098069/llm_benchmarking/models/llama/llama-2-7b/lora/yard1_sql-lora-test_dummy_rank_16/ dummy_lora_rank_32=/gpfs/scratch/bsc98/bsc098069/llm_benchmarking/models/llama/llama-2-7b/lora/yard1_sql-lora-test_dummy_rank_32/ --max-num-seqs=50 --max-loras=1 --max-lora-rank=32 > nohup_out.log 2>&1 &
