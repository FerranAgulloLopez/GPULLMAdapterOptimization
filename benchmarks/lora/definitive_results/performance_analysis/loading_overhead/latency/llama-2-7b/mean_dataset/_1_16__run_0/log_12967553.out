WARNING 12-13 11:34:52 _custom_ops.py:14] Failed to import from vllm._C with ModuleNotFoundError("No module named 'vllm._C'")
Namespace(backend='openai', base_url=None, host='localhost', port=9151, endpoint='/v1/completions', dataset=None, dataset_name='sharegpt', dataset_path='/gpfs/scratch/bsc98/bsc098069/llm_benchmarking/data/dummy_dataset_mean.json', model='/gpfs/scratch/bsc98/bsc098069/llm_benchmarking/models/llama/llama-2-7b', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=100, sharegpt_output_len=None, sonnet_input_len=550, sonnet_output_len=150, sonnet_prefix_len=200, request_rate=inf, request_rate_by_lora=None, seed=0, trust_remote_code=False, disable_tqdm=True, save_result=True, metadata=None, result_dir='benchmarks/lora/definitive_results/theory/lora_overhead/llama-2-7b/mean_dataset/_1_16__run_0', launch_server=True, server_args='--port=9151 --disable-log-requests --model=/gpfs/scratch/bsc98/bsc098069/llm_benchmarking/models/llama/llama-2-7b --enable-lora --lora-modules=sql-lora=/gpfs/scratch/bsc98/bsc098069/llm_benchmarking/models/llama/llama-2-7b/lora/yard1_sql-lora-test_dummy_rank_16/ --max-num-seqs=50 --max-loras=1 --max-lora-rank=16', disable_log_stats=False, disable_loras_users=False, user_lora_request_relation=None, infinite_behaviour=False, restrict_loras=None)
Server started
Requests users. Values: ['0']. Counts: [100]
Requests loras. Values: ['sql-lora']. Counts: [100]
Error while running usage checker: HTTPConnectionPool(host='localhost', port=9151): Max retries exceeded with url: /metrics/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff37f687820>: Failed to establish a new connection: [Errno 111] Connection refused'))
Error while running usage checker: HTTPConnectionPool(host='localhost', port=9151): Max retries exceeded with url: /metrics/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff37f6ac640>: Failed to establish a new connection: [Errno 111] Connection refused'))
Error while running usage checker: HTTPConnectionPool(host='localhost', port=9151): Max retries exceeded with url: /metrics/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff37f687c70>: Failed to establish a new connection: [Errno 111] Connection refused'))
Error while running usage checker: HTTPConnectionPool(host='localhost', port=9151): Max retries exceeded with url: /metrics/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff37f686ce0>: Failed to establish a new connection: [Errno 111] Connection refused'))
Error while running usage checker: HTTPConnectionPool(host='localhost', port=9151): Max retries exceeded with url: /metrics/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff37f6ac550>: Failed to establish a new connection: [Errno 111] Connection refused'))
Error while running usage checker: HTTPConnectionPool(host='localhost', port=9151): Max retries exceeded with url: /metrics/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff37f6acf10>: Failed to establish a new connection: [Errno 111] Connection refused'))
Error while running usage checker: HTTPConnectionPool(host='localhost', port=9151): Max retries exceeded with url: /metrics/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff37f6ad7e0>: Failed to establish a new connection: [Errno 111] Connection refused'))
Error while running usage checker: HTTPConnectionPool(host='localhost', port=9151): Max retries exceeded with url: /metrics/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff37f652f20>: Failed to establish a new connection: [Errno 111] Connection refused'))
Error while running usage checker: HTTPConnectionPool(host='localhost', port=9151): Max retries exceeded with url: /metrics/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff37f685bd0>: Failed to establish a new connection: [Errno 111] Connection refused'))
Error while running usage checker: HTTPConnectionPool(host='localhost', port=9151): Max retries exceeded with url: /metrics/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff37f6ad510>: Failed to establish a new connection: [Errno 111] Connection refused'))
Error while running usage checker: HTTPConnectionPool(host='localhost', port=9151): Max retries exceeded with url: /metrics/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff37f6acc40>: Failed to establish a new connection: [Errno 111] Connection refused'))
Error while running usage checker: HTTPConnectionPool(host='localhost', port=9151): Max retries exceeded with url: /metrics/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff37f6ac550>: Failed to establish a new connection: [Errno 111] Connection refused'))
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: inf
============ Serving Benchmark Result ============
Successful requests:                     100       
Benchmark duration (s):                  25.86     
Total input tokens:                      25000     
Total generated tokens:                  23100     
Request throughput (req/s):              3.87      
Input token throughput (tok/s):          966.71    
Output token throughput (tok/s):         893.24    
---------------Time to First Token----------------
Mean TTFT (ms):                          13867.04  
Median TTFT (ms):                        15667.80  
P99 TTFT (ms):                           17672.58  
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          28.51     
Median TPOT (ms):                        28.53     
P99 TPOT (ms):                           29.89     
---------------Inter-token Latency----------------
Mean ITL (ms):                           28.63     
Median ITL (ms):                         26.64     
P99 ITL (ms):                            58.80     
==================================================
Concurrent checker terminated
Server terminated
